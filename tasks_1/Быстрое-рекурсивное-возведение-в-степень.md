---
replit: https://repl.it/@IlyaSiganov/fastpower#main.c
tag: рекурсия
---

# Быстрое рекурсивное возведение в степень

Напишите программу, возводящее число в целую степень с помощью рекурсии.

Существует более быстрый алгоритм возведения числа в степень, основывающийся на следующем наблюдении:

<!-- $$\begin{aligned} b ^ n = {(b^{n/2})} ^ 2 && if \ n \ is \ even \\ b ^ n = b * b^{n-1} && if \ n \ is \ odd \end{aligned}$$ -->

![формула](https://render.githubusercontent.com/render/math?math=%5Cbegin%7Baligned%7D%20b%20%5E%20n%20%3D%20%7B%28b%5E%7Bn/2%7D%29%7D%20%5E%202%20%26%26%20if%20%5C%20n%20%5C%20is%20%5C%20even%20%5C%5C%20b%20%5E%20n%20%3D%20b%20%2A%20b%5E%7Bn-1%7D%20%26%26%20if%20%5C%20n%20%5C%20is%20%5C%20odd%20%5Cend%7Baligned%7D)

А также примите во внимание факт, что

<!-- $$(b^{n/2})^2 = (b^2) ^ {n/2}$$ -->

![фрмула](https://render.githubusercontent.com/render/math?math=%28b%5E%7Bn/2%7D%29%5E2%20%3D%20%28b%5E2%29%20%5E%20%7Bn/2%7D)

Реализуйте быстрое возведение в степень с помощью рекурсии.

Отличное объяснение, как решить эту задачу, есть в главе `1.2.4. Возведение в степень` книги "Структура и интерпретация компьютерных программ".

Запрещено использовать циклы (for, while, do-while, goto метки). Вместо этого используйте рекурсию.

```c
#include <stdio.h>

#include "test.h"

// Дополнительные функции создавать можно.

/**
 * Быстрое возведение в степень.
 * Говорят, что можно возводить число рекурсивно в степень быстрее,
 * чем x*pow(x, n-1).
 *
 * Функция должна считаться рекурсивно.
 * Циклы for, while использовать запрещено.
 *
 * @param x - число, которое надо возвести в степень.
 * @param n - показатель степени.
 * @return результат возведения числа x в степень n.
 */
double fast_power(double x, int n) {
  // Напиши меня
  return x * n;
}

void cli(void) {
  // TODO: напиши меня
  // 1. Запросите у пользователя числа x и n
  // 2. Считайте с консоли числа x и n
  // 4. Выведите пользователю результат fast_power(x, n)
}

void test(void) {
  // Это тесты. НЕ УДАЛЯЙТЕ ИХ!
  // Преподаватель будет грустить, если вы удалите тесты T_T.
  // Тесты проверяют, что ваш код работает правильно.
  // Если задача решена неправильно,
  // то в консоли вы увидите ошибку и пояснение.
  // Сдавайте лабу, когда устраните все ошибки в тестах.
  // Если возникли трудности, то попросите преподавателя вам помочь ^_^.

  ASSERT_DOUBLE_EQUAL(9, fast_power(3, 2), EPSILON);
  ASSERT_DOUBLE_EQUAL(1, fast_power(1, 0), EPSILON);
  ASSERT_DOUBLE_EQUAL(14551915.228366852, fast_power(-2.5, 18), EPSILON);
  ASSERT_DOUBLE_EQUAL(0.00390625, fast_power(2, -8), EPSILON);
}

int main(void) {
  test();
  cli();
  return 0;
}
```
